/**
 * Visibly jQuery Plugin v1.1
 *
 * @version 1.1 (05/03/2015)
 * @author Daniel Rivers <me@danielrivers.com>
 * @see https://github.com/DanielRivers/jQuery-Visibly/
 *
 * Dual licensed under the MIT and GPLv3 Licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-3.0.html
 *
 */
!function(e){e.fn.rVal=function(){var i;return e(this).is("select")?e(this).find("option:selected").each(function(){e(this).parent().is("select")&&(i=e(this).val())}):i=e(this).val(),i}}(jQuery),function(e){e.fn.Visibly=function(i){var t=e.extend({clearOnHide:!1,attr:"visibly",vdelim:",",edelim:":",nedelim:"!",regularExpression:!1,fdelim:";",rdelim:"%"},i),n=[];return this.each(function(){var i=e(this),l=RegExp(t.edelim+"|"+t.nedelim);e.each(e(this).attr(t.attr).split(t.fdelim),function(s,r){var a=e("#"+r.split(l)[0]);0==a.length&&(a=e('INPUT[name="'+r.split(l)[0]+'"]')),a.bind("keyup change click",function(){var n=!0;e.each(i.attr(t.attr).split(t.rdelim),function(i,s){return n=!0,e.each(s.split(t.fdelim),function(i,s){var r=e("#"+s.split(l)[0]);if(0==r.length&&(r=e("INPUT[name='"+s.split(l)[0]+"']:checked")),void 0!=r.val()){var a="";if(r.is("select")?r.find("option:selected").each(function(){e(this).parent().is("select")&&(a=e(this).rVal())}):a=r.val(),null!=s.split(t.edelim)[1])var c=e.grep(s.split(t.edelim)[1].split(t.vdelim),function(i){return-1!=e.inArray(a,s.split(t.edelim)[1].split(t.vdelim))?!0:t.regularExpression?a.match(i):!1});if(null!=s.split(t.nedelim)[1])var c=e.grep(s.split(t.nedelim)[1].split(t.vdelim),function(i){return-1!=e.inArray(a,s.split(t.nedelim)[1].split(t.vdelim))?!1:t.regularExpression?!a.match(i):!0});0==c.length&&(n=!1)}else n=!1}),!n}),n?i.is("option")?i.parent("span.hide").length&&i.unwrap():i.show():i.is("option")?0==i.parent("span.hide").length&&(i.val()==i.closest("select").val()&&i.closest("select").rVal(""),i.trigger("change"),i.wrap('<span class="hide" style="display: none;" />')):i.hide(),!n&&t.clearOnHide&&(i.val(""),i.find("input").val(""),i.selectedIndex=0)}),-1==e.inArray(r.split(l)[0],n)&&n.push(r.split(l)[0])})}).promise().done(function(){for(var i=0;i<n.length;i++)e('INPUT[name="'+n[i]+'"]').trigger("change"),e("#"+n[i]).trigger("change")})}}(jQuery);